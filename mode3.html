<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mode 3 | Drift Detection Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        .bg-octave-green {
            background-color: #96FFE6;
        }
        .text-octave-pink {
            color: #F910B2;
        }
        .border-octave-pink {
            border-color: #F910B2;
        }
        .hover\:bg-octave-pink-dark:hover {
            background-color: #d40e9a;
        }
    </style>
</head>
<body class="bg-white min-h-screen flex flex-col">
    <header class="bg-[#96FFE6] py-6 shadow-md">
        <div class="container mx-auto px-4 flex justify-between items-center">
            <div class="flex items-center">
                <img src="https://www.octave.lk/wp-content/uploads/2023/11/logo.png" alt="OCTAVE Logo" class="h-10 mr-4">
                <h1 class="text-3xl font-bold text-[#F910B2]">
                    Drift Detection Tool
                </h1>
            </div>
            <nav>
                <a href="index.html" class="text-[#F910B2] hover:text-[#d40e9a]">
                    <i class="fas fa-home"></i> Home
                </a>
            </nav>
        </div>
    </header>

    <main class="flex-grow container mx-auto px-4 py-8">
        <!-- Header Section -->
        <div class="bg-white rounded-xl shadow-md overflow-hidden p-6 mb-6">
            <h2 class="text-2xl font-semibold text-pink mb-4">OCTAVE - CLCD</h2>
            <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-6">
                <div class="bg-[#96FFE6] p-4 rounded-lg">
                    <h3 class="text-lg font-medium text-[#F910B2] mb-2">Business Unit</h3>
                    <select class="w-full border-[#F910B2] rounded p-2" id="businessUnitSelect">
                        <option value="">Select Business Unit</option>
                        <option value="CCS">CCS</option>
                        <option value="JMSL">JMSL</option>
                    </select>
                </div>
                <div class="bg-[#96FFE6] p-4 rounded-lg">
                    <h3 class="text-lg font-medium text-[#F910B2] mb-2">Use Case</h3>
                <select class="w-full border-[#F910B2] rounded p-2" id="useCaseSelect" disabled>
                    <option value="">Select Business Unit first</option>
                </select>
                </div>
                <div class="bg-light-green p-4 rounded-lg">
                    <h3 class="text-lg font-medium text-pink mb-2">Short Code</h3>
                    <p class="text-xl" id="shortCodeDisplay">-</p>
                </div>
                <div class="bg-light-green p-4 rounded-lg">
                    <h3 class="text-lg font-medium text-pink mb-2">Runtime</h3>
                    <p class="text-xl">2h 45m</p>
                </div>
            </div>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                <div class="bg-light-green p-4 rounded-lg">
                    <h3 class="text-lg font-medium text-pink mb-2">Current Alert Time</h3>
                    <p class="text-xl">15:42 UTC</p>
                </div>
                <div class="bg-light-green p-4 rounded-lg">
                    <h3 class="text-lg font-medium text-pink mb-2">No. of Runtime</h3>
                    <p class="text-xl">142</p>
                </div>
                <div class="bg-light-green p-4 rounded-lg">
                    <h3 class="text-lg font-medium text-pink mb-2">Alert Keeper</h3>
                    <p class="text-xl">Active</p>
                </div>
            </div>
        </div>

        <!-- Confusion Matrices Section -->
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-6 mb-6">
            <!-- Reference Confusion Matrix -->
            <div class="bg-white rounded-xl shadow-md overflow-hidden p-6">
                <h2 class="text-2xl font-semibold text-pink mb-4">Reference Confusion Matrix</h2>
                <div class="grid grid-cols-3 gap-1 text-center">
                    <div class="p-2 font-bold text-[#F910B2]">Predicted →<br>Actual ↓</div>
                    <div class="p-2 font-bold text-[#F910B2]">Class A</div>
                    <div class="p-2 font-bold text-[#F910B2]">Class B</div>
                    
                    <div class="p-2 font-bold text-[#F910B2]">Class A</div>
                    <div class="p-2 bg-green-100 rounded">90</div>
                    <div class="p-2 bg-red-100 rounded">5</div>
                    
                    <div class="p-2 font-bold text-[#F910B2]">Class B</div>
                    <div class="p-2 bg-red-100 rounded">3</div>
                    <div class="p-2 bg-green-100 rounded">85</div>
                </div>
                <div class="grid grid-cols-3 gap-4 mt-4">
                    <div class="bg-light-green p-4 rounded-lg text-center">
                        <h3 class="text-lg text-pink mb-1">Precision</h3>
                        <p class="text-2xl">0.85</p>
                    </div>
                    <div class="bg-light-green p-4 rounded-lg text-center">
                        <h3 class="text-lg text-pink mb-1">Recall</h3>
                        <p class="text-2xl">0.92</p>
                    </div>
                    <div class="bg-light-green p-4 rounded-lg text-center">
                        <h3 class="text-lg text-pink mb-1">F1</h3>
                        <p class="text-2xl">0.88</p>
                    </div>
                </div>
            </div>
            
            <!-- Current Confusion Matrix -->
            <div class="bg-white rounded-xl shadow-md overflow-hidden p-6">
                <h2 class="text-2xl font-semibold text-pink mb-4">Current Confusion Matrix</h2>
                <div class="grid grid-cols-3 gap-1 text-center">
                    <div class="p-2 font-bold text-[#F910B2]">Predicted →<br>Actual ↓</div>
                    <div class="p-2 font-bold text-[#F910B2]">Class A</div>
                    <div class="p-2 font-bold text-[#F910B2]">Class B</div>
                    
                    <div class="p-2 font-bold text-[#F910B2]">Class A</div>
                    <div class="p-2 bg-green-100 rounded">82</div>
                    <div class="p-2 bg-red-100 rounded">12</div>
                    
                    <div class="p-2 font-bold text-[#F910B2]">Class B</div>
                    <div class="p-2 bg-red-100 rounded">8</div>
                    <div class="p-2 bg-green-100 rounded">78</div>
                </div>
                <div class="grid grid-cols-3 gap-4 mt-4">
                    <div class="bg-light-green p-4 rounded-lg text-center">
                        <h3 class="text-lg text-pink mb-1">Precision</h3>
                        <p class="text-2xl">0.78</p>
                    </div>
                    <div class="bg-light-green p-4 rounded-lg text-center">
                        <h3 class="text-lg text-pink mb-1">Recall</h3>
                        <p class="text-2xl">0.84</p>
                    </div>
                    <div class="bg-light-green p-4 rounded-lg text-center">
                        <h3 class="text-lg text-pink mb-1">F1</h3>
                        <p class="text-2xl">0.81</p>
                    </div>
                </div>
            </div>

            <!-- Percentage Change Confusion Matrix -->
            <div class="bg-white rounded-xl shadow-md overflow-hidden p-6">
                <h2 class="text-2xl font-semibold text-pink mb-4">Percentage Change</h2>
                <div class="grid grid-cols-3 gap-1 text-center">
                    <div class="p-2 font-bold text-[#F910B2]">Predicted →<br>Actual ↓</div>
                    <div class="p-2 font-bold text-[#F910B2]">Class A</div>
                    <div class="p-2 font-bold text-[#F910B2]">Class B</div>
                    
                    <div class="p-2 font-bold text-[#F910B2]">Class A</div>
                    <div class="p-2 bg-red-100 text-red-500 rounded">-8.9%</div>
                    <div class="p-2 bg-red-100 text-red-500 rounded">+140%</div>
                    
                    <div class="p-2 font-bold text-[#F910B2]">Class B</div>
                    <div class="p-2 bg-red-100 text-red-500 rounded">+166%</div>
                    <div class="p-2 bg-green-100 text-green-500 rounded">-8.2%</div>
                </div>
            </div>
        </div>

        <!-- KPIs Section -->
        <div class="bg-white rounded-xl shadow-md overflow-hidden p-6 mb-6">
            <h2 class="text-2xl font-semibold text-pink mb-4">Key Performance Indicators</h2>
            <div class="grid grid-cols-1 md:grid-cols-5 gap-4">
                <div class="bg-light-green p-4 rounded-lg">
                    <h3 class="text-lg font-medium text-pink mb-2">Jensen-Shannon</h3>
                    <p class="text-xl">0.38</p>
                </div>
                <div class="bg-light-green p-4 rounded-lg">
                    <h3 class="text-lg font-medium text-pink mb-2">PSI</h3>
                    <p class="text-xl">0.25</p>
                </div>
                <div class="bg-light-green p-4 rounded-lg">
                    <h3 class="text-lg font-medium text-pink mb-2">Accuracy (Reference)</h3>
                    <p class="text-xl">0.92</p>
                </div>
                <div class="bg-light-green p-4 rounded-lg">
                    <h3 class="text-lg font-medium text-pink mb-2">Accuracy (Current)</h3>
                    <p class="text-xl">0.84</p>
                </div>
                <div class="bg-light-green p-4 rounded-lg">
                    <h3 class="text-lg font-medium text-pink mb-2">Status</h3>
                    <p class="text-xl text-red-500">Warning</p>
                </div>
            </div>
        </div>

        <!-- Tables Section -->
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6">
            <!-- Misclassified Table -->
            <div class="bg-white rounded-xl shadow-md overflow-hidden p-6">
                <h2 class="text-2xl font-semibold text-pink mb-4">Misclassified Table</h2>
                <div class="overflow-x-auto">
                    <table class="min-w-full divide-y divide-gray-200">
                        <thead class="bg-[#96FFE6]">
                            <tr>
                                <th class="px-6 py-3 text-left text-xs font-medium text-[#F910B2] uppercase tracking-wider">ID</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-[#F910B2] uppercase tracking-wider">Predicted</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-[#F910B2] uppercase tracking-wider">Actual</th>
                            </tr>
                        </thead>
                        <tbody class="bg-white divide-y divide-gray-200">
                            <tr>
                                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">1</td>
                                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">Class B</td>
                                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">Class A</td>
                            </tr>
                            <tr>
                                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">2</td>
                                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">Class A</td>
                                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">Class B</td>
                            </tr>
                            <tr>
                                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">3</td>
                                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">Class B</td>
                                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">Class A</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- XAI Result -->
            <div class="bg-white rounded-xl shadow-md overflow-hidden p-6">
                <h2 class="text-2xl font-semibold text-pink mb-4">XAI Result</h2>
                <div class="bg-light-green p-4 rounded-lg">
                    <p class="text-gray-700">The current model shows decreased performance compared to reference values, particularly in precision (8.2% decrease) and recall (8.7% decrease). The confusion matrices reveal increased misclassification rates between Class A and Class B. These metrics suggest the model may require retraining or parameter adjustment.</p>
                </div>
            </div>
        </div>

        <!-- Error and Misclassification Percentages -->
        <div class="bg-white rounded-xl shadow-md overflow-hidden p-6">
            <h2 class="text-2xl font-semibold text-pink mb-4">Error and Misclassification Percentages</h2>
            <div class="bg-light-green p-4 rounded-lg">
                <p class="text-gray-700 mb-4">Overall error rate has increased from 8% to 16% compared to reference data. Misclassification between Class A and Class B has increased by 140% (from 5% to 12%). The most significant change is in Class B being predicted as Class A, which has increased by 166% (from 3% to 8%).</p>
                <p class="text-gray-700">The model's precision has decreased by 8.2% (from 85% to 78%) while recall has decreased by 8.7% (from 92% to 84%). The F1 score has correspondingly decreased by 8% (from 0.88 to 0.81).</p>
            </div>
        </div>

        <script>
            // Handle business unit selection
            const businessUnitSelect = document.getElementById('businessUnitSelect');
            const useCaseSelect = document.getElementById('useCaseSelect');
            
            businessUnitSelect.addEventListener('change', function() {
                const businessUnit = this.value;
                useCaseSelect.innerHTML = '<option value="">Select Use Case</option>';
                useCaseSelect.disabled = !businessUnit;
                
                if (businessUnit === 'CCS') {
                    useCaseSelect.innerHTML += `
                        <option value="Distribution Efficiency">Distribution Efficiency</option>
                        <option value="MT Promo">MT Promo</option>
                    `;
                } else if (businessUnit === 'JMSL') {
                    useCaseSelect.innerHTML += `
                        <option value="Customer Churn">Customer Churn</option>
                    `;
                }
                
                // Store selection in localStorage
                localStorage.setItem('businessUnit', businessUnit);
            });
            
            useCaseSelect.addEventListener('change', function() {
                // Store selection in localStorage
                localStorage.setItem('useCase', this.value);
                
                // Generate short code
                const businessUnit = businessUnitSelect.value;
                const useCase = this.value;
                const shortCode = `${businessUnit.substring(0,2)}-${useCase.substring(0,2)}`;
                document.getElementById('shortCodeDisplay').textContent = shortCode;
                localStorage.setItem('shortCode', shortCode);
            });
            
            // Initialize from localStorage
            if (localStorage.getItem('businessUnit')) {
                businessUnitSelect.value = localStorage.getItem('businessUnit');
            }
            if (localStorage.getItem('useCase')) {
                useCaseSelect.value = localStorage.getItem('useCase');
                const businessUnit = localStorage.getItem('businessUnit');
                const useCase = localStorage.getItem('useCase');
                const shortCode = `${businessUnit.substring(0,2)}-${useCase.substring(0,2)}`;
                document.getElementById('shortCodeDisplay').textContent = shortCode;
            }
        </script>
    </main>

    <footer class="bg-pink py-4 text-white text-center">
        <div class="container mx-auto px-4">
            <p>&copy; 2023 Drift Detection Dashboard. All rights reserved.</p>
        </div>
    </footer>
</body>
</html>