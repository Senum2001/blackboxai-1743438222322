<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mode 4 | Business Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        .bg-octave-green {
            background-color: #96FFE6;
        }
        .text-octave-pink {
            color: #F910B2;
        }
        .border-octave-pink {
            border-color: #F910B2;
        }
        .hover\:bg-octave-pink-dark:hover {
            background-color: #d40e9a;
        }
        .control-card {
            transition: all 0.3s ease;
        }
        .control-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
    </style>
</head>
<body class="bg-white min-h-screen flex flex-col">
    <header class="bg-[#96FFE6] py-6 shadow-md">
        <div class="container mx-auto px-4 flex justify-between items-center">
            <div class="flex items-center">
                <img src="https://www.octave.lk/wp-content/uploads/2023/11/logo.png" alt="OCTAVE Logo" class="h-10 mr-4">
                <h1 class="text-3xl font-bold text-[#F910B2]">
                    Drift Detection Tool
                </h1>
            </div>
            <nav>
                <a href="index.html" class="text-[#F910B2] hover:text-[#d40e9a]">
                    <i class="fas fa-home"></i> Home
                </a>
            </nav>
        </div>
    </header>

    <main class="flex-grow container mx-auto px-4 py-8">
        <!-- Header Section -->
        <div class="bg-white rounded-xl shadow-md overflow-hidden p-6 mb-6">
            <h2 class="text-2xl font-semibold text-pink mb-4">OCTAVE - CLCD</h2>
            <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-6">
                <div class="bg-[#96FFE6] p-4 rounded-lg">
                    <h3 class="text-lg font-medium text-[#F910B2] mb-2">Business Unit</h3>
                    <select class="w-full border-[#F910B2] rounded p-2" id="businessUnitSelect">
                        <option value="">Select Business Unit</option>
                        <option value="CCS">CCS</option>
                        <option value="JMSL">JMSL</option>
                    </select>
                </div>
                <div class="bg-[#96FFE6] p-4 rounded-lg">
                    <h3 class="text-lg font-medium text-[#F910B2] mb-2">Use Case</h3>
                    <select class="w-full border-[#F910B2] rounded p-2" id="useCaseSelect" disabled>
                        <option value="">Select Business Unit first</option>
                    </select>
                </div>
                <div class="bg-light-green p-4 rounded-lg">
                    <h3 class="text-lg font-medium text-pink mb-2">Short Code</h3>
                    <p class="text-xl" id="shortCodeDisplay">-</p>
                </div>
                <div class="bg-light-green p-4 rounded-lg">
                    <h3 class="text-lg font-medium text-pink mb-2">Runtime</h3>
                    <p class="text-xl">2h 45m</p>
                </div>
            </div>
        </div>

        <!-- Visualization Section -->
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-6 mb-6">
            <!-- MAPE/MSE Plot -->
            <div class="bg-white rounded-xl shadow-md overflow-hidden p-6 lg:col-span-2">
                <h2 class="text-2xl font-semibold text-pink mb-4">MAPE/MSE Plot</h2>
                <div class="h-64 bg-gray-100 rounded flex items-center justify-center">
                    <i class="fas fa-chart-line text-4xl text-pink"></i>
                </div>
            </div>

            <!-- State Colors -->
            <div class="bg-white rounded-xl shadow-md overflow-hidden p-6">
                <h2 class="text-2xl font-semibold text-pink mb-4">Current State</h2>
                <div class="space-y-4">
                    <div class="flex items-center">
                        <div class="w-8 h-8 bg-red-500 rounded-full mr-3 flex items-center justify-center">
                            <div class="w-6 h-6 bg-red-300 rounded-full animate-pulse"></div>
                        </div>
                        <span class="text-lg">Critical</span>
                    </div>
                    <div class="flex items-center">
                        <div class="w-8 h-8 bg-orange-500 rounded-full mr-3 flex items-center justify-center">
                            <div class="w-6 h-6 bg-orange-300 rounded-full animate-pulse"></div>
                        </div>
                        <span class="text-lg">Warning</span>
                    </div>
                    <div class="flex items-center">
                        <div class="w-8 h-8 bg-yellow-500 rounded-full mr-3 flex items-center justify-center">
                            <div class="w-6 h-6 bg-yellow-300 rounded-full animate-pulse"></div>
                        </div>
                        <span class="text-lg">Caution</span>
                    </div>
                    <div class="flex items-center">
                        <div class="w-8 h-8 bg-green-500 rounded-full mr-3 flex items-center justify-center">
                            <div class="w-6 h-6 bg-green-300 rounded-full animate-pulse"></div>
                        </div>
                        <span class="text-lg">Normal</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- KPIs Section -->
        <div class="bg-white rounded-xl shadow-md overflow-hidden p-6 mb-6">
            <h2 class="text-2xl font-semibold text-pink mb-4">Key Performance Indicators</h2>
            <div class="grid grid-cols-1 md:grid-cols-5 gap-4">
                <div class="bg-light-green p-4 rounded-lg">
                    <h3 class="text-lg font-medium text-pink mb-2">KStest</h3>
                    <p class="text-xl">0.42</p>
                </div>
                <div class="bg-light-green p-4 rounded-lg">
                    <h3 class="text-lg font-medium text-pink mb-2">Wasserstein Distance</h3>
                    <p class="text-xl">1.85</p>
                </div>
                <div class="bg-light-green p-4 rounded-lg">
                    <h3 class="text-lg font-medium text-pink mb-2">Mean MSE (Reference)</h3>
                    <p class="text-xl">0.12</p>
                </div>
                <div class="bg-light-green p-4 rounded-lg">
                    <h3 class="text-lg font-medium text-pink mb-2">Mean MSE (Current)</h3>
                    <p class="text-xl">0.18</p>
                </div>
                <div class="bg-light-green p-4 rounded-lg">
                    <h3 class="text-lg font-medium text-pink mb-2">Status</h3>
                    <p class="text-xl text-red-500">Warning</p>
                </div>
            </div>
        </div>

        <!-- Current Confusion Matrix -->
        <div class="bg-white rounded-xl shadow-md overflow-hidden p-6 mb-6">
            <h2 class="text-2xl font-semibold text-[#F910B2] mb-4">Current Confusion Matrix</h2>
            <div class="grid grid-cols-3 gap-1 text-center">
                <div class="p-2 font-bold text-[#F910B2]">Predicted →<br>Actual ↓</div>
                <div class="p-2 font-bold text-[#F910B2]">Class A</div>
                <div class="p-2 font-bold text-[#F910B2]">Class B</div>
                
                <div class="p-2 font-bold text-[#F910B2]">Class A</div>
                <div class="p-2 bg-green-100 rounded">82</div>
                <div class="p-2 bg-red-100 rounded">12</div>
                
                <div class="p-2 font-bold text-[#F910B2]">Class B</div>
                <div class="p-2 bg-red-100 rounded">8</div>
                <div class="p-2 bg-green-100 rounded">78</div>
            </div>
            <div class="grid grid-cols-3 gap-4 mt-4">
                <div class="bg-[#96FFE6] p-4 rounded-lg text-center">
                    <h3 class="text-lg text-[#F910B2] mb-1">Precision</h3>
                    <p class="text-2xl">0.78</p>
                </div>
                <div class="bg-[#96FFE6] p-4 rounded-lg text-center">
                    <h3 class="text-lg text-[#F910B2] mb-1">Recall</h3>
                    <p class="text-2xl">0.84</p>
                </div>
                <div class="bg-[#96FFE6] p-4 rounded-lg text-center">
                    <h3 class="text-lg text-[#F910B2] mb-1">F1</h3>
                    <p class="text-2xl">0.81</p>
                </div>
            </div>
        </div>

        <!-- Tables Section -->
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6">
            <!-- Error Comparison Table -->
            <div class="bg-white rounded-xl shadow-md overflow-hidden p-6">
                <h2 class="text-2xl font-semibold text-pink mb-4">Error Comparison Top(-)</h2>
                <div class="overflow-x-auto">
                    <table class="min-w-full divide-y divide-gray-200">
                        <thead class="bg-[#96FFE6]">
                            <tr>
                                <th class="px-6 py-3 text-left text-xs font-medium text-[#F910B2] uppercase tracking-wider">ID</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-[#F910B2] uppercase tracking-wider">Time Period</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-[#F910B2] uppercase tracking-wider">Mean Prediction</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-[#F910B2] uppercase tracking-wider">Error</th>
                            </tr>
                        </thead>
                        <tbody class="bg-white divide-y divide-gray-200">
                            <tr>
                                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">1</td>
                                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">2025-01</td>
                                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">1250</td>
                                <td class="px-6 py-4 whitespace-nowrap text-sm text-red-500">-90</td>
                            </tr>
                            <tr>
                                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">2</td>
                                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">2025-01</td>
                                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">980</td>
                                <td class="px-6 py-4 whitespace-nowrap text-sm text-orange-500">-65</td>
                            </tr>
                            <tr>
                                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">3</td>
                                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">2025-02</td>
                                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">1100</td>
                                <td class="px-6 py-4 whitespace-nowrap text-sm text-yellow-500">-42</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- XAI Result -->
            <div class="bg-white rounded-xl shadow-md overflow-hidden p-6">
                <h2 class="text-2xl font-semibold text-pink mb-4">XAI Result</h2>
                <div class="bg-light-green p-4 rounded-lg">
                    <p class="text-gray-700">The current model shows increased error rates compared to reference values, particularly in MSE (50% increase) and MAE (37.5% increase). The Wasserstein distance of 1.85 indicates significant distribution shift. The KStest value of 0.42 suggests moderate deviation from expected behavior. These metrics collectively suggest the model may require retraining or parameter adjustment.</p>
                </div>
            </div>
        </div>

        <script>
            const businessUnitSelect = document.getElementById('businessUnitSelect');
            const useCaseSelect = document.getElementById('useCaseSelect');
            
            businessUnitSelect.addEventListener('change', function() {
                const businessUnit = this.value;
                useCaseSelect.innerHTML = '<option value="">Select Use Case</option>';
                useCaseSelect.disabled = !businessUnit;
                
                if (businessUnit === 'CCS') {
                    useCaseSelect.innerHTML += `
                        <option value="Distribution Efficiency">Distribution Efficiency</option>
                        <option value="MT Promo">MT Promo</option>
                    `;
                } else if (businessUnit === 'JMSL') {
                    useCaseSelect.innerHTML += `
                        <option value="Customer Churn">Customer Churn</option>
                    `;
                }
                
                localStorage.setItem('businessUnit', businessUnit);
            });
            
            useCaseSelect.addEventListener('change', function() {
                localStorage.setItem('useCase', this.value);
                
                const businessUnit = businessUnitSelect.value;
                const useCase = this.value;
                const shortCode = `${businessUnit.substring(0,2)}-${useCase.substring(0,2)}`;
                document.getElementById('shortCodeDisplay').textContent = shortCode;
                localStorage.setItem('shortCode', shortCode);
            });

            // Initialize from localStorage
            if (localStorage.getItem('businessUnit')) {
                businessUnitSelect.value = localStorage.getItem('businessUnit');
                businessUnitSelect.dispatchEvent(new Event('change'));
            }
            if (localStorage.getItem('useCase')) {
                useCaseSelect.value = localStorage.getItem('useCase');
            }
        </script>
    </main>
</body>
</html>
